<script src="https://aloycwl.github.io/js/cdn/jquery.min.js"></script>
<script src="https://aloycwl.github.io/js/cdn/ipfs-api.min.js"></script>

<canvas id="myCanvas" width="100" height="100" style="display: none"></canvas>
<img id="iii" width="400" height="400" />
<script>
  var c = document.getElementById('myCanvas'),
    imageObj1 = new Image(),
    imageObj2 = new Image();
  imageObj1.setAttribute('crossorigin', 'anonymous');
  imageObj1.src = 'https://aloycwl.github.io/omg_frontend/1.png';
  c.getContext('2d').drawImage(imageObj1, 0, 0);
  imageObj2.setAttribute('crossorigin', 'anonymous');
  imageObj2.src = 'https://aloycwl.github.io/omg_frontend/2.png';
  c.getContext('2d').drawImage(imageObj2, 0, 0);
  $('#iii').attr('src', c.toDataURL('image/png'));

  async function load() {
    const pro = await new Promise((d) => {
      const reader = new FileReader();
      reader.onloadend = () => {
        ipfs.add(ipfs.Buffer.from(reader.result)).then((files) => {
          d(files);
        });
      };
      reader.readAsArrayBuffer(
        new File(document.getElementById('iii').src, 'image/png')
      );
    });
    cid = pro[0].hash;
  }
  /load();
</script>
